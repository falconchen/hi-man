# HiCMS

- [æ¼”ç¤ºç½‘ç«™](https://hi.cellmean.com)

- ä¸€ä¸ªç®€å•å®ç”¨çš„CMSï¼Œæœ€æ—©æ˜¯ä¸ºå°å°ç¼–è¾‘å†™çš„ä¹±å¼¹å®šæ—¶å‘å¸ƒç½‘ç«™ã€‚æ”¯æŒå°†æ–‡ç« å®šæ—¶å‘å¸ƒï¼ŒåŒæ­¥åˆ°`oschina`åšå®¢ï¼Œæ”¯æŒåŠ¨å¼¹å¤‡ä»½ã€‚

- åŒæ—¶æœ¬é¡¹ç›®ä½œä¸ºæœ¬äººæƒ³æ³•å’ŒæŠ€æœ¯çš„å®éªŒåœºï¼Œä¸ªäººåŒ–é£æ ¼æ˜æ˜¾ï¼Œå……æ–¥ç€å„ç§ä¸æˆç†Ÿçš„æƒ³æ³•å’Œå®ç°ï¼Œè¯·è°¨æ…ä½¿ç”¨ä»£ç ï¼Œåæœè‡ªè´Ÿã€‚ğŸ‘»

## é…ç½®

 å°† `app/settings.sample.php` å¤åˆ¶åˆ° `app/settings.php` ï¼Œä¿®æ”¹ç›¸åº”çš„é€‰é¡¹

ä»¥ä¸‹ç›®å½•éœ€è¦å¼€å¯ *å†™å…¥* æƒé™

- log/
- cache/
- media/




## ç›¸å…³é¡¹ç›®

- [w3css ç®¡ç†é¢æ¿æ¨¡æ¿ä¸€](https://www.w3schools.com/w3css/tryw3css_templates_mail.htm)
- [w3css ç®¡ç†é¢æ¿æ¨¡æ¿äºŒ](https://www.w3schools.com/w3css/tryw3css_templates_analytics.htm)

- [slim3](http://www.slimframework.com)

- [slim3 æ–‡æ¡£](http://www.slimframework.com/docs/)

- [Slim 3 Skeleton](https://github.com/slimphp/Slim-Skeleton)

- [violin](https://github.com/alexgarrett/violin) ä¸€ä¸ªä¾¿äºä½¿ç”¨ï¼Œæ”¯æŒé«˜åº¦å®šåˆ¶çš„ PHP éªŒè¯å™¨

- [Illuminate Database component](https://github.com/illuminate/database)

- [eloquent](https://laravel.com/docs/5.8/eloquent)

- [eloquent6.x](https://learnku.com/docs/laravel/6.x/eloquent/5176)


- [Laravel Tips ](https://github.com/seekerliu/laravel-tips) è™½ç„¶æ˜¯é’ˆå¯¹ laravel, ä¹Ÿå¯¹å¾ˆå¤šç»„ä»¶æœ‰è§£é‡Š

- [Twig æ¨¡æ¿å¼•æ“](https://twig.symfony.com/)

- [w3css](https://www.w3schools.com/w3css/default.asp)

- [TinyMCE v4](https://www.tiny.cloud/docs-4x/quick-start/)

- [TinyMCE v4 ä¸»é¢˜/æ’ä»¶ç­‰](https://www.tiny.cloud/get-tiny/custom-builds/)

- [TinyMCE v4 å¤–è§‚(menubar å’Œ toolbar ç­‰)](https://www.tiny.cloud/docs/configure/editor-appearance/#menubar)

- [TinyMCE è‡ªå®šä¹‰ä¸€ä¸ª menubar æŒ‰é’®](https://www.tiny.cloud/docs/demo/custom-toolbar-menu-button/)

- [å…è´¹çš„æ–‡ä»¶ä¸Šä¼ ç®¡ç†å™¨ç»„ä»¶](https://www.responsivefilemanager.com/demo.php) å¯æ•´åˆåˆ° TinyMCE

- [File and image management plugins for TinyMCE](https://www.tyssendesign.com.au/articles/cms/file-and-image-management-plugins-for-tinymce/#tinybrowser)

- [eloquent-tips-tricks](https://laravel-news.com/eloquent-tips-tricks)

- [ Symfony Console Components documentation](https://symfony.com/doc/current/components/console.html)

- [markdown-js](https://github.com/evilstreak/markdown-js)

- [ä¸€ä¸ª PHP markdown è§£æå™¨](https://packagist.org/packages/league/commonmark)

- [äº‹ä»¶åˆ†å‘å™¨](https://symfony.com/doc/current/components/event_dispatcher.html)

- [anti-xss](https://github.com/voku/anti-xss)

- [html-sanitizer](https://github.com/tgalopin/html-sanitizer)

- [Eloquent Slim 3 åˆ†é¡µ](https://stackoverflow.com/questions/40395805/pagination-with-eloquent-5-3-using-slim-3)

- [Eloquent raw æŸ¥è¯¢](https://laravel.com/docs/5.8/queries)

- [Schema Builder æ•°æ®åº“ç±»å‹](https://laravel.com/docs/5.0/schema)

- [Schema Builder æ·»åŠ /åˆ é™¤ç´¢å¼•](http://laravelhowto.blogspot.com/2017/04/how-to-add-and-drop-indexes-in-laravel.html)

- [Symfony ç¿»è¯‘ç»„ä»¶](https://symfony.com/doc/current/components/translation.html)

- [Symfony ç¿»è¯‘ç»„ä»¶ï¼ˆä¸­æ–‡æ–‡æ¡£ï¼‰](http://www.symfonychina.com/doc/current/translation.html)

- [Guzzle6 æ–‡æ¡£(å¹¶å‘è¯·æ±‚)](http://docs.guzzlephp.org/en/stable/quickstart.html#concurrent-requests)

- [ stackoverflow Guzzleå¹¶å‘è¯·æ±‚ç¤ºä¾‹ ](https://stackoverflow.com/questions/53271764/how-to-perform-concurrent-requests-with-guzzlehttp/53272469)

- [å…³äºlaraval å’ŒEloquentå„ç§ howtoçš„ç½‘ç«™](http://laravelhowto.blogspot.com/)

- [æœç‹—æœºå™¨ç¿»è¯‘API](https://deepi.sogou.com/)

- [Prismåœ¨çº¿é€‰é¡¹](https://prismjs.com/download.html#themes=prism-okaidia&languages=markup+css+clike+javascript+c+go+java+lua+markup-templating+perl+php+python+ruby+twig&plugins=line-highlight+line-numbers+toolbar+copy-to-clipboard)

- [twig1.xæ–‡æ¡£ readthedocs](https://twig.readthedocs.io/en/1.x/advanced_legacy.html)

- [w3csså¹´åº¦æµè¡Œé…è‰²](https://www.w3schools.com/w3css/w3css_color_libraries.asp)

- [Eloquent ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šå…³ç³»](https://learnku.com/docs/laravel/5.5/eloquent-relationships/1333#one-to-many)

- [åŸºäº Laravel + Vue ç»„ä»¶å®ç°æ–‡ä»¶å¼‚æ­¥ä¸Šä¼ ](https://laravelacademy.org/post/9677)

- [PHPå›¾åƒå¤„ç†ç±»ï¼Œéå¸¸å¼ºå¤§](http://image.intervention.io/)

## codes && tips

```è¿­ä»£twig

{% for type,messages in array %}
<div class="panel panel-{{ type }}">
    {% for msg in messages %}
    <div class="panel-{% if loop.first %}heading{% else %}body{% endif%}">{{msg}}</div>
    {% endfor %}
</div>
{% endfor %}

```

## è¾“å‡ºEloquent / ORMçš„sql

```
function getSQL($builder) {
    $sql = $builder->toSql();
    foreach ( $builder->getBindings() as $binding ) {
        $value = is_numeric($binding) ? $binding : "'".$binding."'";
        $sql = preg_replace('/\?/', $value, $sql, 1);
    }
    return $sql;
}

ç”¨æ³•:
$tweet = Post::where('post_name','6276890')->limit(1)->get();

//å…ˆè½¬æˆè¿™æ ·çš„å½¢å¼,å› ä¸ºget()æ–¹æ³•åå¾—åˆ°çš„æ˜¯Collectionå¯¹è±¡ï¼Œæ‰€ä»¥å¿…é¡»åœ¨è¿™ä¹‹å‰æˆªå–å‡ºBuiderå¯¹è±¡ï¼Œå»é™¤get
$tweetBuider = Post::where('post_name','6276890')->limit(1);
echo $this->getSQL($tweetBuider);

//ç›®å‰getSqlä½œä¸ºHelperTraitçš„ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨Actioné‡Œå¯ç”¨
echo $this->getSQL($tweetBuider);

```
## æ·»åŠ äº†Postå’ŒPostMetaè¡¨çš„ä¸€å¯¹å¤šå’Œå¤šå¯¹å¤šå…³ç³»
```

$tweet = Post::where('post_name',$tweetId)->first();
if(!is_null($tweet)){
   $tweetDatas = $tweet->metas('meta_key','like','tweet%')->get();
}

var_dump(  $tweetDatas );

$post = PostMeta::find(8025)->post()->first();
var_dump($post);


```        


### å¤‡ä»½åŠ¨å¼¹

å‚æ•°:
- userId=12&pageToken=DBA816934CD0AA59&forceUpdate=0
- forceUpdate å¼ºåˆ¶æ›´æ–°æ‰€æœ‰åŠ¨å¼¹ï¼Œå¦åˆ™åªæ›´æ–°æœªå…¥åº“çš„åŠ¨å¼¹

```
php public/index.php BackupDongDan [args]
```

### å¤‡ä»½åŠ¨å¼¹è¯„è®º/ç²¾å½©è¯„è®º/ç‚¹èµ

å‚æ•°ï¼š
- userId=12&fromPostId=1234&orderBy=post_date&order=desc&take=10
- tweetId=123456 ç‰¹å®šåŠ¨å¼¹id
```
php public/index.php BackupDongDanComments [args]
```

### å¤‡ä»½åŠ¨å¼¹å›¾ç‰‡å’Œè¯„è®º/ç‚¹èµè€…å¤´åƒ
- userId=12&fromPostId=1234&orderBy=post_date&order=desc&take=10
- tweetId=123456 ç‰¹å®šåŠ¨å¼¹id
```
php public/index.php BackupDongDanImages [args]
```

### æ›´æ–°æ—§oscé™æ€æ–‡ä»¶æœåŠ¡å™¨50x50çš„å¤´åƒä¸º200x200çš„ï¼Œéƒ¨åˆ†404

```
php public/index.php UpdateDongDanOldImages
```


å¸¦ çƒ­é—¨è¯„è®º like /commentsçš„åŠ¨å¼¹id(ä¸å¸¦å›¾)

`21147461`

å¸¦å›¾/è¯„è®º/likesçš„åŠ¨å¼¹idï¼ˆä¸å¸¦çƒ­é—¨è¯„è®º)

`12620768`

### twig ä¸è§£ææ¨¡æ¿å†…å®¹ç›´æ¥å¼•å…¥ ,ç›¸å½“äº `file_get_contents` çš„æ•ˆæœ

Twig 1.15  ä»¥ä¸Šå¯ç”¨

```
{{ source('imagely/item-tmpl-js.html') }} 
```

<https://twig.symfony.com/doc/3.x/functions/source.html>

### è‡ªåŠ¨éƒ¨ç½²

- 2020.07.08
ä»Šå¤©ç”¨`nodemon`å’Œ`git webhook`åšäº†ä¸€ä¸ªç›‘æ§`git push`ååœ¨æœåŠ¡å™¨æ‰§è¡Œè‡ªåŠ¨æ›´æ–°çš„å°ç©æ„ï¼Œè¿™æ ·å°±ç®€å•å®ç°è‡ªåŠ¨éƒ¨ç½²äº†
ç”¨äº†`systemd`è‡ªåŠ¨è¿è¡Œå¤±è´¥ï¼Œç›®å‰æš‚æ—¶ä½¿ç”¨`screen`åå°è¿è¡Œ.


### å¤šçº§åµŒå¥— `where` ï¼Œéœ€è¦åŠ  ( ) çš„æ–¹æ³•ï¼š

<https://stackoverflow.com/questions/30434037/laravel-5-eloquent-where-and-or-in-clauses>

å¯ä»¥å‚è€ƒ `SearchAction::index` çš„å®ç°

### æœç´¢åŠŸèƒ½
- 2020.07.09
åŠ å…¥æœç´¢åŠŸèƒ½ï¼Œå¯ä»¥æœç´¢æ–‡ç« å’ŒåŠ¨å¼¹ï¼Œç›®å‰ç®€å•ä½¿ç”¨ `like` æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¹‹åå¯èƒ½ä½¿ç”¨å…¨æ–‡ç´¢å¼•ã€‚


### è·å–å½“å‰é¡µé¢è·¯ç”±åç§°å¹¶ä¼ åˆ°æ¨¡æ¿

```
$args['route'] = $request->getAttribute('route')->getName();
return $this->view->render($response,'test.twig', $args);
```

### `Twig` æ‰©å±•åŠ å…¥ä¸€ä¸ªåˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºæ•°ç»„çš„`Test`

```
public function getTests(){
        return [
            new \Twig_SimpleTest('array', function ($value) {
                return is_array($value);
            })
        ];
    }
```    
æ¨¡æ¿è°ƒç”¨ 
```
{% if myVar is array %}
...
{% endif %}
```
å†…ç½®Test,åˆ¤æ–­ç©ºå€¼

```
is null checks whether the value is null:

{% if var is null %}
    {# do something #}
{% endif %}
is defined checks whether the variable is defined:

{% if var is not defined %}
    {# do something #}
{% endif %}
Additionally the is sameas test, which does a type strict comparison of two values, might be of interest for checking values other than null (like false):

{% if var is sameas(false) %}
    {# do something %}
{% endif %}
```

### åŠ å…¥åœ¨`modal`ä¸­æŸ¥çœ‹å¤§å›¾çš„åŠŸèƒ½
2020.07.12
@todo: é•¿å›¾ï¼ˆé«˜åº¦è¶…è¿‡ä¸€å±çš„å›¾ç‰‡æŸ¥çœ‹ä¼šæœ‰é—®é¢˜) 


### twig æ ¸å¿ƒæ‰©å±• ï¼Œfilter å’Œ function

`vendor/twig/twig/src/Extension/CoreExtension.php`

### åŠ å…¥å±•ç¤ºåŠ¨å¼¹è¯„è®ºå’Œéƒ¨åˆ†å…ƒä¿¡æ¯çš„è¯¦æƒ…é¡µ
2020.07.18
ç¬¬ä¸€æ¬¡ä½¿ç”¨`grid`å¸ƒå±€


### å°†åŠ¨å¼¹å†…çš„ urlå­—ç¬¦ä¸²è½¬æ¢æˆå¯ä»¥åœ¨æ–°çª—å£æ‰“å¼€çš„ `a`æ ‡ç­¾ï¼ŒåŒæ—¶ä¿ç•™åŠ¨å¼¹åŸæœ‰é“¾æ¥ã€‚
2020.07.21

é—®é¢˜ï¼š<https://stackoverflow.com/questions/1188129/replace-urls-in-text-with-html-links>

æœ€ç»ˆé‡‡ç”¨çš„ç­”æ¡ˆï¼š<https://stackoverflow.com/posts/40039631/revisions>

åšäº†ä¸€ä¸ªå‡½æ•°`makeLinks`å’Œä¸€ä¸ªåŒå`twig filter`ã€‚

### è¿ç§»åˆ°coding ç§å¯†ä»“åº“,githubçš„webhookå¤±è´¥ç‡å¤ªé«˜ï¼Œ å¯¼è‡´æœåŠ¡å™¨ç»å¸¸æ›´æ–°å¤±è´¥
2020.07.23
æµ‹è¯•ä¸€ä¸‹ webhook åŒæ­¥


### todo

[æ‹–æ‹½ä¸Šä¼ æ–‡ä»¶](https://css-tricks.com/drag-and-drop-file-uploading/)


